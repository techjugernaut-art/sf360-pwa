<mat-progress-bar class="mb-0" *ngIf="isProcessing" mode="indeterminate"></mat-progress-bar>
<div class="step-content">

  <div class="step-content-heading">
    <img class="step-heading-img" src="assets/img/icons/payment-method.svg" />
    <p class="text-primary step-content-heading-desc">Subscription payment to list your shop on StoreFront Mall</p>
  </div>
  <div class="mr-5 ml-5 pr-3 pl-3">
    <div class="row">
      <mat-form-field class="col-md-6 " >

        <mat-label>Select Premium Plan <b class="text-danger">*</b> </mat-label>
        <mat-select [formControl]="premium_plan_id">
          <mat-option *ngFor="let plan of premiumPlans" [value]="plan?.id">{{plan?.name}} @ {{plan?.currency}}
            {{plan?.amount_to_show_on_app}} for {{plan?.number_of_months}} month(s)</mat-option>
        </mat-select>
        <!-- <mat-icon matSuffix popoverTitle="P" class="cursor-pointer"
          ngbPopover="This is the name of the shop registered on StoreFront" triggers="mouseenter:mouseleave"
          placement="bottom">help</mat-icon> -->
        <mat-hint class="text-danger" *ngIf="!premium_plan_id?.valid && premium_plan_id?.touched">Please select Premium Plan
        </mat-hint>
      </mat-form-field>
      <mat-form-field class="col-md-6">
        <mat-label>I have a Discount Code </mat-label>
        <input matInput [formControl]="referral_code">
        <i matSuffix class="fa fa-spinner fa-spin text-primary" *ngIf="isProcessingDiscountCheck" ></i>
      </mat-form-field>
    </div>



    <p class="mb-1 text-left"><b class="mr-1 subscription-payment-desc">SUBSCRIPTION FEE:</b> <span>{{currency}} {{premiumPlanAmount}}</span></p>
        <p class="mb-1 text-left"><b class="mr-1  subscription-payment-desc">DISCOUNT:</b> <span>{{currency}} {{discountPercentage * premiumPlanAmount}}</span></p>
        <p class="text-left"><b class="mr-1  subscription-payment-desc">GRAND TOTAL:</b> <span>{{currency}} {{premiumPlanAmount - (discountPercentage * premiumPlanAmount)}}</span></p>
    <p class="text-primary subscription-payment-method-heading"  *ngIf="discountPercentage != 1">Payment Method</p>
    <div class="row mlr-0" *ngIf="discountPercentage != 1" >
      <div class="col-md-2 payment-method-item-wrapper" *ngIf="currency === currencies.GHS">

        <input type="radio" id="momo" [value]="'MOMO'" name="momo">
        <label class="payment-method-grid-list-item" for="momo"
        (click)="selectPaymentMethod('MOMO', 'MTN', 'MTN MOMO')">

          <img src="./assets/img/icons/check.svg" class="payment-method-selected-icon" />
          <img src="./assets/img/icons/ic_mtn_money.png" alt="" class="payment-method-grid-list-item-media">
          <p class="mb-0 payment-method-grid-list-item-description"></p>
        </label>
      </div>
      <div class="col-md-2 payment-method-item-wrapper" *ngIf="currency === currencies.GHS">
        <input type="radio" id="voda" [value]="'MOMO'" name="momo">
        <label class="payment-method-grid-list-item" for="voda"
        (click)="selectPaymentMethod('MOMO', 'VOD', 'VODAFONE CASH')">

          <img src="./assets/img/icons/check.svg" class="payment-method-selected-icon" />
          <img src="./assets/img/icons/voda.png" alt="" class="payment-method-grid-list-item-media">
          <p class="mb-0 payment-method-grid-list-item-description"></p>
        </label>
      </div>
      <div class="col-md-2 payment-method-item-wrapper" *ngIf="currency === currencies.GHS">
        <input type="radio" id="atigo" [value]="'MOMO'" name="momo">
        <label class="payment-method-grid-list-item" for="atigo"
        (click)="selectPaymentMethod('MOMO', 'AIR', 'AIRTELTIGO CASH')">

          <img src="./assets/img/icons/check.svg" class="payment-method-selected-icon" />
          <img src="./assets/img/icons/atigo.png" alt="" class="payment-method-grid-list-item-media">
          <p class="mb-0 payment-method-grid-list-item-description"></p>
        </label>
      </div>
      <div class="col-md-2 payment-method-item-wrapper" *ngIf="currency !== ''">
        <input type="radio" id="card" [value]="'CARD'" name="momo" >
        <label class="payment-method-grid-list-item" for="card"
        (click)="selectPaymentMethod('CARD', '', '')">

          <img src="./assets/img/icons/check.svg" class="payment-method-selected-icon" />
          <img src="./assets/img/icons/card_payment.png" alt="" class="payment-method-grid-list-item-media">
          <p class="mb-0 payment-method-grid-list-item-description"></p>
        </label>
      </div>


      <div class="col-md-2 payment-method-item-wrapper" *ngIf="currency !== ''">

        <input type="radio" id="DIRECT_TRANSFER" [value]="'DIRECT_TRANSFER'" name="momo">
        <label class="payment-method-grid-list-item" for="DIRECT_TRANSFER"
          (click)="selectPaymentMethod('DIRECT_TRANSFER', '', '')">

          <img src="./assets/img/icons/check.svg" class="payment-method-selected-icon" />
          <img src="./assets/img/icons/bank_transfer.png" alt="" class="payment-method-grid-list-item-media">
          <p class="mb-0 payment-method-grid-list-item-description"></p>
        </label>
      </div>

    </div>
  </div>
</div>


<div class="stepper-bottom-action">
  <div class="step-left-action">
    <!-- <a [routerLink]="['/onboarding/mall-template']" [queryParams]="{ step: 5 }" mat-raised-button>BACK</a> -->
  </div>
  <div class="stepper-right-action">
    <!-- <button (click)="onSkip()" class="mr-3" mat-button color="primary">SKIP</button> -->
    <!-- <span *ngIf="getAmountVal()">
      <button mat-raised-button color="primary" [disabled]="!referral_code.valid || premium_plan_id?.invalid" (click)="goToDashboard()">GO TO DASHBOARD</button>
    </span>
    <span *ngIf="!getAmountVal()">
      <button mat-raised-button [disabled]="paymentMethod === '' || premium_plan_id?.invalid" color="primary" (click)="showPaymentPrompt()">PAY</button>
    </span> -->
  </div>
</div>

<app-iframe-dialog [src]="redirectUrl" *ngIf="redirectUrl !== ''"></app-iframe-dialog>
