<app-main-nav [isProcessing]="isProcessing">
  <app-breadcrumb-actions class="full-width" [pageHeaderOptions]="pageHeaderOptions"
    (dataRefreshed)="onDataRefreshed($event)" >
    <div mainAction>
      <button mat-raised-button *ngIf="!isPartner" color="accent" (click)="addAgent()" [disabled]="isAgent">
        ADD
      </button>
    </div>
  </app-breadcrumb-actions>
  <mat-card>
    <mat-card-content class="ml-3 mr-3">
      <app-table-header-actions [tableHeaderOptions]="tableHeaderOption">

      </app-table-header-actions>
      <div class="table-responsive">
      <table class="table dataTable no-footer table-border-bottom">
          <thead>
            <tr role="row">
              <th class="wd-15p">Name</th>
              <th class="wd-15p">Phone Number</th>
              <th class="wd-15p">Email</th>
              <th class="wd-15p">Role</th>
              <th class="wd-15p">Last Active</th>
              <th class="wd-25p">Date Created</th>
              <th class="wd-25p">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngIf="!isProcessing && allAgents?.length <= 0">
              <td colspan="10" class="text-center"><app-empty-record></app-empty-record></td>
            </tr>
            <tr *ngFor="let agent of allAgents">
              <td>{{agent?.first_name | titlecase}} {{agent?.last_name | titlecase}}</td>
              <td>{{agent?.phone_number}}</td>
              <td>{{agent?.email}}</td>
              <td>{{agent?.user_type}}</td>
              <td>{{agent?.last_seen | date: 'medium'}}</td>
              <td>{{agent?.created | date: 'medium'}}</td>
              <td class="text-center">
                <a class="btn btn-primary btn-sm" *ngIf="!isAgent"
                [routerLink]="['/agents', agent?.id]"><i
                    class="fe fe-eye"></i></a>
              </td>
            </tr>
          </tbody>
        </table>

      </div>
        <app-pagination [dataSet]="allAgents" [nextPage]="nextPage" [prevPage]="prevPage" [totalPage]="totalPage"
        [requestPayload]="requestPayload" [requestMethod]="'POST'" (pageChanged)="onPageChanged($event)"
        [isProcessing]="isProcessing"></app-pagination>

    </mat-card-content>

  </mat-card>


</app-main-nav>
